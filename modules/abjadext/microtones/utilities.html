

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>abjadext.microtones.utilities &mdash; Perllan API 0.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/uqbar.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../static/notes.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../static/documentation_options.js"></script>
        <script src="../../../static/jquery.js"></script>
        <script src="../../../static/underscore.js"></script>
        <script src="../../../static/doctools.js"></script>
        <script defer="defer" src="../../../static/copybutton.js"></script>
        <script src="../../../static/ga.js"></script>
    
    <script type="text/javascript" src="../../../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #556B2F" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Perllan API
          

          
            
            <img src="../../../static/perllan-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts.html">Core concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/abjadext/microtones/index.html">microtones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/evans/index.html">evans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/tsmakers/index.html">tsmakers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../scores.html">Score gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../recipes_pitch.html">Pitch Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../recipes_sequence.html">Sequence Recipes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Perllan API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>abjadext.microtones.utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for abjadext.microtones.utilities</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">abjad</span>
<span class="kn">import</span> <span class="nn">quicktions</span>


<span class="k">def</span> <span class="nf">_flatten</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">out</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">_flatten</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>


<div class="viewcode-block" id="PitchClassSet"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.PitchClassSet">[docs]</a><span class="k">class</span> <span class="nc">PitchClassSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pitch Class Set.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>
<span class="sd">    &gt;&gt;&gt; import quicktions</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch_classes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSet([0, 1, 6])</span>
<span class="sd">            PitchClassSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSet((0, 1, 6))</span>
<span class="sd">            PitchClassSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSet([0, (1, 6)])</span>
<span class="sd">            PitchClassSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pitch_classes</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">pitch_classes</span><span class="p">)</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitch_classes</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>

<div class="viewcode-block" id="PitchClassSet.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets value at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSet([0, 1, 6])[0]</span>
<span class="sd">            Fraction(0, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="PitchClassSet.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSet([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(0, 1)</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>

<span class="sd">            &gt;&gt;&gt; for x in microtones.PitchClassSet([&quot;31/2&quot;, &quot;10&quot;, &quot;33/4&quot;, &quot;-5&quot;, &quot;36/10&quot;, &quot;113/10&quot;]).prime_form():</span>
<span class="sd">            ...     print(x)</span>
<span class="sd">            0</span>
<span class="sd">            1/10</span>
<span class="sd">            7/2</span>
<span class="sd">            19/4</span>
<span class="sd">            13/2</span>
<span class="sd">            39/5</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">pitch</span></div>

<div class="viewcode-block" id="PitchClassSet.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.PitchClassSet([0, 1, 2]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSet([0, 1, 6])</span>
<span class="sd">            PitchClassSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="PitchClassSet.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.PitchClassSet([0, 1, 6]))</span>
<span class="sd">            &#39;{0, 1, 6}&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pitch</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;}&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PitchClassSet.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Pitch Class Set with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSet([&quot;0&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; pc_set += [0, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_set))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">pitch_classes</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSet([0, 1, 6])</span>
<span class="sd">            &gt;&gt;&gt; 6 in pc_set</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in pc_set</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSet([0, 1, 18])</span>
<span class="sd">            &gt;&gt;&gt; 6 in pc_set</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in pc_set</span>
<span class="sd">            False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span></div>

    <span class="k">def</span> <span class="nf">_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_transpose_to_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_binary_value</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">bit</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="PitchClassSet.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSet([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i for i in range(12)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_set.complement(input_scale)))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([0, 1, 3]).invert()))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([0, 1, 3]).invert(3)))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">-</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">+</span> <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([0, 1, 3]).multiply(2)))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">pitch</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.normal_order"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.normal_order">[docs]</a>    <span class="k">def</span> <span class="nf">normal_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets normal order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([0, 2, 1]).normal_order()))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span>
        <span class="n">original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sorted</span><span class="p">()</span>
        <span class="n">rotations</span> <span class="o">=</span> <span class="p">[</span><span class="n">original</span><span class="o">.</span><span class="n">_rotate</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">)]</span>
        <span class="n">candidate</span> <span class="o">=</span> <span class="n">rotations</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">candidate_binary_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binary_value</span><span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">_transpose_to_zero</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">rotation</span> <span class="ow">in</span> <span class="n">rotations</span><span class="p">:</span>
            <span class="n">alternative_candidate_binary_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binary_value</span><span class="p">(</span>
                <span class="n">rotation</span><span class="o">.</span><span class="n">_transpose_to_zero</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">alternative_candidate_binary_value</span> <span class="o">&lt;</span> <span class="n">candidate_binary_value</span><span class="p">:</span>
                <span class="n">candidate</span> <span class="o">=</span> <span class="n">rotation</span>
                <span class="n">candidate_binary_value</span> <span class="o">=</span> <span class="n">alternative_candidate_binary_value</span>
        <span class="k">return</span> <span class="n">candidate</span></div>

<div class="viewcode-block" id="PitchClassSet.prime_form"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.prime_form">[docs]</a>    <span class="k">def</span> <span class="nf">prime_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets prime form.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([1, 3, 2]).prime_form()))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal_order</span><span class="p">()</span><span class="o">.</span><span class="n">_transpose_to_zero</span><span class="p">()</span>
        <span class="n">inverted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span><span class="o">.</span><span class="n">normal_order</span><span class="p">()</span><span class="o">.</span><span class="n">_transpose_to_zero</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binary_value</span><span class="p">(</span><span class="n">original</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binary_value</span><span class="p">(</span><span class="n">inverted</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">original</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">inverted</span></div>

<div class="viewcode-block" id="PitchClassSet.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Pitch Class Set sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([2, 1, 0]).sorted()))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchClassSet.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSet.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSet([0, 1, 2]).transpose(2)))</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     abjad.storage(</span>
<span class="sd">            ...         microtones.PitchClassSet([0, 1, 3, 4, 5]).invert().transpose(1+3)</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            microtones.PitchClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">pitch</span> <span class="o">+</span> <span class="n">n</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PitchSet"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.PitchSet">[docs]</a><span class="k">class</span> <span class="nc">PitchSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pitch Set.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitches</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSet([0, 1, 6])</span>
<span class="sd">            PitchSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSet((0, 1, 6))</span>
<span class="sd">            PitchSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSet([0, (1, 6)])</span>
<span class="sd">            PitchSet([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pitches</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>

<div class="viewcode-block" id="PitchSet.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets value at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSet([0, 1, 6])[0]</span>
<span class="sd">            Fraction(0, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="PitchSet.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchSet([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(0, 1)</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">pitch</span></div>

<div class="viewcode-block" id="PitchSet.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.PitchSet([0, 1, 2]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSet([0, 1, 2])</span>
<span class="sd">            PitchSet([Fraction(0, 1), Fraction(1, 1), Fraction(2, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="PitchSet.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.PitchSet([0, 1, 2]))</span>
<span class="sd">            &#39;{0, 1, 2}&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pitch</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;}&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PitchSet.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Pitch Set with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; p_set = microtones.PitchSet([&quot;0&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; p_set += [0, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(p_set))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">pitches</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; p_set = microtones.PitchSet([0, 1, 6])</span>
<span class="sd">            &gt;&gt;&gt; 6 in p_set</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in p_set</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; p_set = microtones.PitchSet([0, 1, 18])</span>
<span class="sd">            &gt;&gt;&gt; 6 in p_set</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; 18 in p_set</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span></div>

    <span class="k">def</span> <span class="nf">_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_transpose_to_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<div class="viewcode-block" id="PitchSet.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchSet([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i for i in range(12)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_set.complement(input_scale)))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSet([0, 1, 3]).invert()))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(-1, 1),</span>
<span class="sd">                    Fraction(-3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSet([0, 1, 3]).invert(2)))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">-</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">+</span> <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSet([0, 1, 3]).multiply(2)))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">pitch</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitches</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Pitch Set sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSet([2, 1, 0]).sorted()))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchSet.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSet.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSet([0, 1, 2]).transpose(2)))</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     abjad.storage(</span>
<span class="sd">            ...         microtones.PitchSet([0, 1, 3, 4, 5]).invert().transpose(1+3)</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            microtones.PitchSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(-1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">pitch</span> <span class="o">+</span> <span class="n">n</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PitchClassSegment"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.PitchClassSegment">[docs]</a><span class="k">class</span> <span class="nc">PitchClassSegment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pitch Class Segment.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch_classes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSegment([0, 1, 6])</span>
<span class="sd">            PitchClassSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSegment((0, 1, 6))</span>
<span class="sd">            PitchClassSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSegment([0, (1, 6)])</span>
<span class="sd">            PitchClassSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pitch_classes</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">pitch_classes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitch_classes</span>
        <span class="p">]</span>

<div class="viewcode-block" id="PitchClassSegment.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets value at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSegment([0, 1, 6])[0]</span>
<span class="sd">            Fraction(0, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="PitchClassSegment.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSegment([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(0, 1)</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">pitch</span></div>

<div class="viewcode-block" id="PitchClassSegment.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.PitchClassSegment([0, 1, 2]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchClassSegment([0, 1, 2])</span>
<span class="sd">            PitchClassSegment([Fraction(0, 1), Fraction(1, 1), Fraction(2, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="PitchClassSegment.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.PitchClassSegment([0, 1, 2]))</span>
<span class="sd">            &#39;(0, 1, 2)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pitch</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PitchClassSegment.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Pitch Class Segment with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.PitchClassSegment([&quot;0&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; pc_segment += [0, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_segment))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">pitch_classes</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.PitchClassSegment([0, 1, 6])</span>
<span class="sd">            &gt;&gt;&gt; 6 in pc_segment</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in pc_segment</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.PitchClassSegment([0, 1, 18])</span>
<span class="sd">            &gt;&gt;&gt; 6 in pc_segment</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in pc_segment</span>
<span class="sd">            False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span></div>

    <span class="k">def</span> <span class="nf">_transpose_to_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<div class="viewcode-block" id="PitchClassSegment.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchClassSegment([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i for i in range(12)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_set.complement(input_scale)))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 3]).invert()))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 3]).invert(2)))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">-</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">+</span> <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 3]).multiply(2)))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">pitch</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.retrograde"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.retrograde">[docs]</a>    <span class="k">def</span> <span class="nf">retrograde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets retrograde.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 2]).retrograde()))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchClassSegment.rotate"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 2]).rotate(1)))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Pitch Class Segment sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([2, 1, 0]).sorted()))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchClassSegment.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchClassSegment.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchClassSegment([0, 1, 2]).transpose(2)))</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     abjad.storage(</span>
<span class="sd">            ...         microtones.PitchClassSegment([0, 1, 3, 4, 5]).invert().transpose(1+3)</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            microtones.PitchClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">pitch</span> <span class="o">+</span> <span class="n">n</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PitchSegment"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.PitchSegment">[docs]</a><span class="k">class</span> <span class="nc">PitchSegment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pitch Segment.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitches</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSegment([0, 1, 6])</span>
<span class="sd">            PitchSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSegment((0, 1, 6))</span>
<span class="sd">            PitchSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSegment([0, (1, 6)])</span>
<span class="sd">            PitchSegment([Fraction(0, 1), Fraction(1, 1), Fraction(6, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pitches</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">]</span>

<div class="viewcode-block" id="PitchSegment.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets value at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSegment([0, 1, 6])[0]</span>
<span class="sd">            Fraction(0, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="PitchSegment.__setitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__setitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets value at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.PitchSegment([0, 1, 6])</span>
<span class="sd">            &gt;&gt;&gt; s[0] = 5</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchSegment([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(0, 1)</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">pitch</span></div>

<div class="viewcode-block" id="PitchSegment.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.PitchSegment([0, 1, 2]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.PitchSegment([0, 1, 2])</span>
<span class="sd">            PitchSegment([Fraction(0, 1), Fraction(1, 1), Fraction(2, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="PitchSegment.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.PitchSegment([0, 1, 2]))</span>
<span class="sd">            &#39;(0, 1, 2)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pitch</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PitchSegment.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Pitch Segment with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; p_segment = microtones.PitchSegment([&quot;0&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; p_segment += [0, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(p_segment))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">pitches</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; p_segment = microtones.PitchSegment([0, 1, 6])</span>
<span class="sd">            &gt;&gt;&gt; 6 in p_segment</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; 18 in p_segment</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; p_segment = microtones.PitchSegment([0, 1, 18])</span>
<span class="sd">            &gt;&gt;&gt; 6 in p_segment</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; 18 in p_segment</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span></div>

    <span class="k">def</span> <span class="nf">_transpose_to_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<div class="viewcode-block" id="PitchSegment.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.PitchSegment([0, 1, 2])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i for i in range(12)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(pc_set.complement(input_scale)))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pitch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 3]).invert()))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(-1, 1),</span>
<span class="sd">                    Fraction(-3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 3]).invert(2)))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">-</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">+</span> <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 3]).multiply(2)))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">pitch</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitches</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.retrograde"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.retrograde">[docs]</a>    <span class="k">def</span> <span class="nf">retrograde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets retrograde.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 2]).retrograde()))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchSegment.rotate"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 2]).rotate(1)))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Pitch Segment sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([2, 1, 0]).sorted()))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">))</span></div>

<div class="viewcode-block" id="PitchSegment.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.PitchSegment.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(abjad.storage(microtones.PitchSegment([0, 1, 2]).transpose(2)))</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     abjad.storage(</span>
<span class="sd">            ...         microtones.PitchSegment([0, 1, 3, 4, 5]).invert().transpose(1+3)</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            microtones.PitchSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(0, 1),</span>
<span class="sd">                    Fraction(-1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">pitch</span> <span class="o">+</span> <span class="n">n</span> <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RatioClassSet"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.RatioClassSet">[docs]</a><span class="k">class</span> <span class="nc">RatioClassSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ratio Class Set.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>
<span class="sd">    &gt;&gt;&gt; import quicktions</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratio_classes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSet([1, 2, 3])</span>
<span class="sd">            RatioClassSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSet((1, 2, 3))</span>
<span class="sd">            RatioClassSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSet([1, (2, 3)])</span>
<span class="sd">            RatioClassSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratio_classes</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">ratio_classes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">ratio_classes</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ratio</span>
            <span class="k">while</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">ratio</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">/=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">*=</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>

<div class="viewcode-block" id="RatioClassSet.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets item at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSet([1, 2, 3])[0]</span>
<span class="sd">            Fraction(1, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="RatioClassSet.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.RatioClassSet([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>
<span class="sd">            Fraction(3, 2)</span>

<span class="sd">            &gt;&gt;&gt; for x in microtones.RatioClassSet([&quot;31/2&quot;, &quot;10&quot;, &quot;33/4&quot;, &quot;36/10&quot;, &quot;113/10&quot;]):</span>
<span class="sd">            ...     print(x)</span>
<span class="sd">            31/16</span>
<span class="sd">            5/4</span>
<span class="sd">            33/32</span>
<span class="sd">            9/5</span>
<span class="sd">            113/80</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ratio</span></div>

<div class="viewcode-block" id="RatioClassSet.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.RatioClassSet([1, 2, 3]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSet.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSet([1, 2, 3])</span>
<span class="sd">            RatioClassSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="RatioClassSet.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioClassSet([1, 2, 3]))</span>
<span class="sd">            &#39;{1, 2, 3/2}&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ratio</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;}&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="RatioClassSet.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Ratio Class Set with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rc_set = microtones.RatioClassSet([&quot;1&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; rc_set += [1, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(rc_set))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 16),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">ratio_classes</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSet.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; rc_set = microtones.RatioClassSet([1, 2, 6])</span>
<span class="sd">            &gt;&gt;&gt; 1 in rc_set</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span></div>

<div class="viewcode-block" id="RatioClassSet.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rc_set = microtones.RatioClassSet([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i + 1 for i in range(11)]</span>
<span class="sd">            &gt;&gt;&gt; s = rc_set.complement(input_scale)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(7, 4),</span>
<span class="sd">                    Fraction(9, 8),</span>
<span class="sd">                    Fraction(11, 8),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSet.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([2, 4, 3]).invert()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(4, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([2, 4, 3]).invert(3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(9, 8),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">axis</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">/</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">inverse</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSet.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([1, 2, 3]).multiply(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSet.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Class Set sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([5, 2, 3, &quot;1/2&quot;, 1, &quot;1/5&quot;]).sorted()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(8, 5),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioClassSet.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSet.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([1, 2, 3]).transpose(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(7, 4),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSet([1, 2, 4, 5, 6]).invert().transpose(1+3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(7, 5),</span>
<span class="sd">                    Fraction(4, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RatioSet"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.RatioSet">[docs]</a><span class="k">class</span> <span class="nc">RatioSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ratio Set.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratios</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSet([1, 2, 3])</span>
<span class="sd">            RatioSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSet((1, 2, 3))</span>
<span class="sd">            RatioSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSet([1, (2, 3)])</span>
<span class="sd">            RatioSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratios</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">ratios</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ratio</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>

<div class="viewcode-block" id="RatioSet.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets item at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSet([1, 2, 3])[0]</span>
<span class="sd">            Fraction(1, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="RatioSet.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_set = microtones.RatioSet([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_set:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>
<span class="sd">            Fraction(3, 1)</span>

<span class="sd">            &gt;&gt;&gt; for x in microtones.RatioSet([&quot;31/2&quot;, &quot;10&quot;, &quot;33/4&quot;, &quot;36/10&quot;, &quot;113/10&quot;]):</span>
<span class="sd">            ...     print(x)</span>
<span class="sd">            31/2</span>
<span class="sd">            10</span>
<span class="sd">            33/4</span>
<span class="sd">            18/5</span>
<span class="sd">            113/10</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ratio</span></div>

<div class="viewcode-block" id="RatioSet.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.RatioSet([1, 2, 3]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSet([1, 2, 3])</span>
<span class="sd">            RatioSet([Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="RatioSet.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioSet([1, 2, 3]))</span>
<span class="sd">            &#39;{1, 2, 3}&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ratio</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;}&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="RatioSet.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Ratio Set with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; r_set = microtones.RatioSet([&quot;1&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; r_set += [1, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; s = r_set</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">ratios</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; r_set = microtones.RatioSet([1, 2, 6])</span>
<span class="sd">            &gt;&gt;&gt; 1 in r_set</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span></div>

<div class="viewcode-block" id="RatioSet.constrain_to_octave"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.constrain_to_octave">[docs]</a>    <span class="k">def</span> <span class="nf">constrain_to_octave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Set constrained within an octave.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioSet([1, 3, &quot;1/5&quot;]).constrain_to_octave())</span>
<span class="sd">            &#39;{1, 3/2, 4/5}&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">constrained</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
            <span class="k">while</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="n">ratio</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">/=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">ratio</span> <span class="o">*=</span> <span class="mi">2</span>
            <span class="n">constrained</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">constrained</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; r_set = microtones.RatioSet([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i + 1 for i in range(11)]</span>
<span class="sd">            &gt;&gt;&gt; s = r_set.complement(input_scale)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([2, 4, 3]).invert()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(1, 4),</span>
<span class="sd">                    Fraction(1, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([2, 4, 3]).invert(3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(9, 2),</span>
<span class="sd">                    Fraction(9, 4),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">axis</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">/</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">inverse</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([1, 2, 3]).multiply(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSet.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Class Set sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([5, 2, 3]).sorted()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioSet.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSet.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([1, 2, 3]).transpose(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSet([1, 2, 4, 5, 6]).invert().transpose(1+3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSet(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(9, 2),</span>
<span class="sd">                    Fraction(17, 4),</span>
<span class="sd">                    Fraction(21, 5),</span>
<span class="sd">                    Fraction(25, 6),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RatioClassSegment"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.RatioClassSegment">[docs]</a><span class="k">class</span> <span class="nc">RatioClassSegment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ratio Class Segment.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratio_classes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSegment([1, 2, 3])</span>
<span class="sd">            RatioClassSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSegment((1, 2, 3))</span>
<span class="sd">            RatioClassSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSegment([1, (2, 3)])</span>
<span class="sd">            RatioClassSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratio_classes</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">ratio_classes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">ratio_classes</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ratio</span>
            <span class="k">while</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">ratio</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">/=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">*=</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>

<div class="viewcode-block" id="RatioClassSegment.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets item at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSegment([1, 2, 3])[0]</span>
<span class="sd">            Fraction(1, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="RatioClassSegment.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.RatioClassSegment([1, 2, 3, 3])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_segment:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>
<span class="sd">            Fraction(3, 2)</span>
<span class="sd">            Fraction(3, 2)</span>

<span class="sd">            &gt;&gt;&gt; for x in microtones.RatioClassSegment([&quot;31/2&quot;, &quot;10&quot;, &quot;33/4&quot;, &quot;36/10&quot;, &quot;113/10&quot;]):</span>
<span class="sd">            ...     print(x)</span>
<span class="sd">            31/16</span>
<span class="sd">            5/4</span>
<span class="sd">            33/32</span>
<span class="sd">            9/5</span>
<span class="sd">            113/80</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ratio</span></div>

<div class="viewcode-block" id="RatioClassSegment.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.RatioClassSegment([1, 2, 3]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioClassSegment([1, 2, 3])</span>
<span class="sd">            RatioClassSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="RatioClassSegment.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioClassSegment([1, 2, 3]))</span>
<span class="sd">            &#39;(1, 2, 3/2)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ratio</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="RatioClassSegment.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Ratio Class Segment with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; rc_segment = microtones.RatioClassSegment([&quot;1&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; rc_segment += [1, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; s = rc_segment</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 16),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">ratio_classes</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; rc_segment = microtones.RatioClassSegment([1, 2, 6])</span>
<span class="sd">            &gt;&gt;&gt; 1 in rc_segment</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span></div>

<div class="viewcode-block" id="RatioClassSegment.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.RatioClassSegment([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i + 1 for i in range(11)]</span>
<span class="sd">            &gt;&gt;&gt; s = pc_segment.complement(input_scale)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(7, 4),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(9, 8),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(11, 8),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([2, 4, 3]).invert()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(4, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([2, 4, 3]).invert(3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(9, 8),</span>
<span class="sd">                    Fraction(9, 8),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">axis</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">/</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">inverse</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([1, 2, 3]).multiply(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.retrograde"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.retrograde">[docs]</a>    <span class="k">def</span> <span class="nf">retrograde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets retrograde.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([1, 2, 3, 3]).retrograde()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioClassSegment.rotate"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([1, 2, 3]).rotate(1)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioClassSegment.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Class Segment sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([5, 2, 3, &quot;1/2&quot;, 1, &quot;1/5&quot;]).sorted()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(8, 5),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioClassSegment.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioClassSegment.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([1, 2, 3]).transpose(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 2),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(7, 4),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioClassSegment([1, 2, 4, 5, 6]).invert().transpose(1+3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioClassSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(7, 5),</span>
<span class="sd">                    Fraction(4, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RatioSegment"><a class="viewcode-back" href="../../../api/abjadext/microtones/utilities.html#abjadext.microtones.utilities.RatioSegment">[docs]</a><span class="k">class</span> <span class="nc">RatioSegment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ratio Segment.</span>

<span class="sd">    &gt;&gt;&gt; from abjadext import microtones</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratios</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Can be initialized with list, tuple, or mixed contents</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSegment([1, 2, &quot;3/2&quot;])</span>
<span class="sd">            RatioSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSegment((1, 2, &quot;3/2&quot;))</span>
<span class="sd">            RatioSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2)])</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSegment([1, [2, &quot;3/2&quot;], (4, 5)])</span>
<span class="sd">            RatioSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 2), Fraction(4, 1), Fraction(5, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratios</span> <span class="o">=</span> <span class="n">_flatten</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">ratios</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ratio</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>

<div class="viewcode-block" id="RatioSegment.__getitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__getitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets item at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSegment([1, 2, 3])[0]</span>
<span class="sd">            Fraction(1, 1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="RatioSegment.__setitem__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__setitem__">[docs]</a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets item at index</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; s[1] = 5</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.__iter__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.RatioSegment([1, 2, 3, 3])</span>
<span class="sd">            &gt;&gt;&gt; for item in pc_segment:</span>
<span class="sd">            ...     item</span>
<span class="sd">            Fraction(1, 1)</span>
<span class="sd">            Fraction(2, 1)</span>
<span class="sd">            Fraction(3, 1)</span>
<span class="sd">            Fraction(3, 1)</span>

<span class="sd">            &gt;&gt;&gt; for x in microtones.RatioSegment([&quot;31/2&quot;, &quot;10&quot;, &quot;33/4&quot;, &quot;36/10&quot;, &quot;113/10&quot;]):</span>
<span class="sd">            ...     print(x)</span>
<span class="sd">            31/2</span>
<span class="sd">            10</span>
<span class="sd">            33/4</span>
<span class="sd">            18/5</span>
<span class="sd">            113/10</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ratio</span></div>

<div class="viewcode-block" id="RatioSegment.__len__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets length of contents.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; len(microtones.RatioSegment([1, 2, 3]))</span>
<span class="sd">            3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.__repr__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets interpreter representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; microtones.RatioSegment([1, 2, 3])</span>
<span class="sd">            RatioSegment([Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="RatioSegment.__str__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets string representation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioSegment([1, 2, 3]))</span>
<span class="sd">            &#39;(1, 2, 3)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ratio</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="RatioSegment.__add__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates Ratio Segment with iterable.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; r_segment = microtones.RatioSegment([&quot;1&quot;, &quot;1/2&quot;, &quot;5/4&quot;])</span>
<span class="sd">            &gt;&gt;&gt; r_segment += [1, quicktions.Fraction(11, 6), quicktions.Fraction(27, 2)]</span>
<span class="sd">            &gt;&gt;&gt; s = r_segment</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(5, 4),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(11, 6),</span>
<span class="sd">                    Fraction(27, 2),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span> <span class="o">+</span> <span class="n">argument</span><span class="o">.</span><span class="n">ratios</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">items</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.__contains__"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.__contains__">[docs]</a>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns boolean</span>

<span class="sd">        ..  container::</span>

<span class="sd">            &gt;&gt;&gt; r_segment = microtones.RatioSegment([1, 2, 6])</span>
<span class="sd">            &gt;&gt;&gt; 1 in r_segment</span>
<span class="sd">            True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span></div>

<div class="viewcode-block" id="RatioSegment.constrain_to_octave"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.constrain_to_octave">[docs]</a>    <span class="k">def</span> <span class="nf">constrain_to_octave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Segment constrained within an octave.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; str(microtones.RatioSegment([1, 3, &quot;1/5&quot;]).constrain_to_octave())</span>
<span class="sd">            &#39;(1, 3/2, 4/5)&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">constrained</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
            <span class="k">while</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="n">ratio</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">/=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">ratio</span> <span class="o">*=</span> <span class="mi">2</span>
            <span class="n">constrained</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">constrained</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.complement"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.complement">[docs]</a>    <span class="k">def</span> <span class="nf">complement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complement in scale.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; pc_segment = microtones.RatioSegment([1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; input_scale = [i + 1 for i in range(11)]</span>
<span class="sd">            &gt;&gt;&gt; s = pc_segment.complement(input_scale)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    Fraction(7, 1),</span>
<span class="sd">                    Fraction(8, 1),</span>
<span class="sd">                    Fraction(9, 1),</span>
<span class="sd">                    Fraction(10, 1),</span>
<span class="sd">                    Fraction(11, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">:</span>
                <span class="n">complements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">complements</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.invert"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.invert">[docs]</a>    <span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets inversion.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([2, 4, 3]).invert()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(1, 4),</span>
<span class="sd">                    Fraction(1, 3),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([2, 4, 3]).invert(3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(9, 2),</span>
<span class="sd">                    Fraction(9, 4),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">axis</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">/</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">]</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">inverse</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">inverse</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.multiply"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets multiplication.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 3]).multiply(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(6, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">multiplied_pitch_classes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">multiplied_pitch_classes</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.retrograde"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.retrograde">[docs]</a>    <span class="k">def</span> <span class="nf">retrograde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets retrograde.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 3, 3]).retrograde()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioSegment.rotate"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets rotation.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 3]).rotate(1)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copied_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">copied_list</span><span class="p">)</span>
        <span class="n">copied_list_</span> <span class="o">=</span> <span class="n">copied_list</span><span class="p">[</span><span class="n">steps</span><span class="p">:]</span> <span class="o">+</span> <span class="n">copied_list</span><span class="p">[:</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">copied_list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="RatioSegment.sorted"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.sorted">[docs]</a>    <span class="k">def</span> <span class="nf">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets Ratio Segment sorted in ascending order.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([5, 2, 3, &quot;1/2&quot;, 1, &quot;1/5&quot;]).sorted()</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(1, 5),</span>
<span class="sd">                    Fraction(1, 2),</span>
<span class="sd">                    Fraction(1, 1),</span>
<span class="sd">                    Fraction(2, 1),</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">))</span></div>

<div class="viewcode-block" id="RatioSegment.transpose"><a class="viewcode-back" href="../../../api/evans/sequence.html#abjadext.microtones.utilities.RatioSegment.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets transposition.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 3]).transpose(2)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(3, 1),</span>
<span class="sd">                    Fraction(4, 1),</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; s = microtones.RatioSegment([1, 2, 4, 5, 6]).invert().transpose(1+3)</span>
<span class="sd">            &gt;&gt;&gt; print(abjad.storage(s))</span>
<span class="sd">            microtones.RatioSegment(</span>
<span class="sd">                [</span>
<span class="sd">                    Fraction(5, 1),</span>
<span class="sd">                    Fraction(9, 2),</span>
<span class="sd">                    Fraction(17, 4),</span>
<span class="sd">                    Fraction(21, 5),</span>
<span class="sd">                    Fraction(25, 6),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transposed</span> <span class="o">=</span> <span class="p">[</span><span class="n">ratio</span> <span class="o">+</span> <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">transposed</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-2021, Gregory Rowland Evans
      <span class="lastupdated">
        Last updated on Jun 03, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>