

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>evans.sequence &mdash; Perllan API 0.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../static/abjad.css" type="text/css" />
  <link rel="stylesheet" href="../../static/uqbar.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../static/notes.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../static/documentation_options.js"></script>
        <script src="../../static/jquery.js"></script>
        <script src="../../static/underscore.js"></script>
        <script src="../../static/doctools.js"></script>
        <script defer="defer" src="../../static/copybutton.js"></script>
        <script src="../../static/ga.js"></script>
    
    <script type="text/javascript" src="../../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #556B2F" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Perllan API
          

          
            
            <img src="../../static/perllan-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts.html">Core concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/abjadext/microtones/index.html">microtones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/evans/index.html">evans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tsmakers/index.html">tsmakers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scores.html">Score gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recipes_pitch.html">Pitch Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recipes_sequence.html">Sequence Recipes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Perllan API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>evans.sequence</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for evans.sequence</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Sequence classes and functions.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">decimal</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">import</span> <span class="nn">abjad</span>
<span class="kn">import</span> <span class="nn">baca</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">quicktions</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">from</span> <span class="nn">abjadext</span> <span class="kn">import</span> <span class="n">microtones</span>
<span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">odeint</span>


<div class="viewcode-block" id="CyclicList"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList">[docs]</a><span class="k">class</span> <span class="nc">CyclicList</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cyclic List</span>

<span class="sd">    .. container:: example</span>

<span class="sd">        &gt;&gt;&gt; _cyc_count = -1</span>
<span class="sd">        &gt;&gt;&gt; _non_cyc_count = -1</span>
<span class="sd">        &gt;&gt;&gt; cyc_generator = evans.CyclicList(lst=[1, 2, 3], forget=False, count=_cyc_count)</span>
<span class="sd">        &gt;&gt;&gt; non_cyc_generator = evans.CyclicList(lst=[1, 2, 3], forget=True, count=_non_cyc_count)</span>

<span class="sd">        &gt;&gt;&gt; cyc_generator(r=2)</span>
<span class="sd">        [1, 2]</span>

<span class="sd">        &gt;&gt;&gt; cyc_generator(r=7)</span>
<span class="sd">        [3, 1, 2, 3, 1, 2, 3]</span>

<span class="sd">        &gt;&gt;&gt; non_cyc_generator(r=2)</span>
<span class="sd">        [1, 2]</span>

<span class="sd">        &gt;&gt;&gt; non_cyc_generator(r=7)</span>
<span class="sd">        [1, 2, 3, 1, 2, 3, 1]</span>

<span class="sd">        &gt;&gt;&gt; print((cyc_generator.state(), non_cyc_generator.state()))</span>
<span class="sd">        (8, 6)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lst</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">forget</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># add *,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lst</span> <span class="o">=</span> <span class="n">lst</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forget</span> <span class="o">=</span> <span class="n">forget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="n">count</span>

<div class="viewcode-block" id="CyclicList.__str__"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">storage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="CyclicList.__repr__"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_repr_format</span><span class="p">()</span></div>

<div class="viewcode-block" id="CyclicList.state_cyc"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.state_cyc">[docs]</a>    <span class="k">def</span> <span class="nf">state_cyc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="n">returned_material</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">returned_material</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">returned_material</span></div>

<div class="viewcode-block" id="CyclicList.non_state_cyc"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.non_state_cyc">[docs]</a>    <span class="k">def</span> <span class="nf">non_state_cyc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="n">returned_material</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">returned_material</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">returned_material</span></div>

<div class="viewcode-block" id="CyclicList.__call__"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">forget</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_cyc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lst</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_state_cyc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lst</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="CyclicList.state"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.CyclicList.state">[docs]</a>    <span class="k">def</span> <span class="nf">state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span></div></div>


<div class="viewcode-block" id="MarkovChain"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.MarkovChain">[docs]</a><span class="k">class</span> <span class="nc">MarkovChain</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Markov Chain</span>

<span class="sd">    .. container:: example</span>

<span class="sd">        &gt;&gt;&gt; prob = {</span>
<span class="sd">        ...     &#39;one&#39;: {&#39;one&#39;: 0.8, &#39;two&#39;: 0.19, &#39;three&#39;: 0.01},</span>
<span class="sd">        ...     &#39;two&#39;: {&#39;one&#39;: 0.2, &#39;two&#39;: 0.7, &#39;three&#39;: 0.1},</span>
<span class="sd">        ...     &#39;three&#39;: {&#39;one&#39;: 0.1, &#39;two&#39;: 0.2, &#39;three&#39;: 0.7}</span>
<span class="sd">        ... }</span>
<span class="sd">        &gt;&gt;&gt; chain = evans.MarkovChain(transition_prob=prob, seed=7)</span>
<span class="sd">        &gt;&gt;&gt; key_list = [</span>
<span class="sd">        ...     x for x in chain.generate_states(</span>
<span class="sd">        ...         current_state=&#39;one&#39;, no=14</span>
<span class="sd">        ...         )</span>
<span class="sd">        ...     ]</span>
<span class="sd">        &gt;&gt;&gt; key_list</span>
<span class="sd">        [&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;, &#39;two&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;, &#39;one&#39;]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition_prob</span><span class="p">,</span> <span class="n">seed</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transition_prob</span> <span class="o">=</span> <span class="n">transition_prob</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">transition_prob</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>

<div class="viewcode-block" id="MarkovChain.__str__"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.MarkovChain.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">storage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="MarkovChain.__repr__"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.MarkovChain.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">storage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="MarkovChain.next_state"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.MarkovChain.next_state">[docs]</a>    <span class="k">def</span> <span class="nf">next_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_state</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="p">,</span>
            <span class="n">p</span><span class="o">=</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transition_prob</span><span class="p">[</span><span class="n">current_state</span><span class="p">][</span><span class="n">next_state</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">next_state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span>
            <span class="p">],</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="MarkovChain.generate_states"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.MarkovChain.generate_states">[docs]</a>    <span class="k">def</span> <span class="nf">generate_states</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_state</span><span class="p">,</span> <span class="n">no</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">future_states</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">no</span><span class="p">):</span>
            <span class="n">next_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_state</span><span class="p">(</span><span class="n">current_state</span><span class="p">)</span>
            <span class="n">future_states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_state</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">next_state</span>
        <span class="k">return</span> <span class="n">future_states</span></div></div>


<div class="viewcode-block" id="PitchClassSet"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSet">[docs]</a><span class="k">class</span> <span class="nc">PitchClassSet</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">PitchClassSet</span><span class="p">):</span>
<div class="viewcode-block" id="PitchClassSet.alpha"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSet.alpha">[docs]</a>    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchClassSet([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=1)</span>
<span class="sd">            PitchClassSet([Fraction(1, 1), Fraction(0, 1), Fraction(3, 1), Fraction(2, 1), Fraction(5, 1), Fraction(4, 1), Fraction(7, 1), Fraction(6, 1), Fraction(9, 1), Fraction(8, 1), Fraction(11, 1), Fraction(10, 1)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchClassSet([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=2)</span>
<span class="sd">            PitchClassSet([Fraction(11, 1), Fraction(2, 1), Fraction(1, 1), Fraction(4, 1), Fraction(3, 1), Fraction(6, 1), Fraction(5, 1), Fraction(8, 1), Fraction(7, 1), Fraction(10, 1), Fraction(9, 1), Fraction(0, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">numbers</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSet.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSet.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="PitchSet"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSet">[docs]</a><span class="k">class</span> <span class="nc">PitchSet</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">PitchSet</span><span class="p">):</span>
<div class="viewcode-block" id="PitchSet.alpha"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSet.alpha">[docs]</a>    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchSet([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=1)</span>
<span class="sd">            PitchSet([Fraction(1, 1), Fraction(0, 1), Fraction(3, 1), Fraction(2, 1), Fraction(5, 1), Fraction(4, 1), Fraction(7, 1), Fraction(6, 1), Fraction(9, 1), Fraction(8, 1), Fraction(11, 1), Fraction(10, 1)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchSet([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=2)</span>
<span class="sd">            PitchSet([Fraction(-1, 1), Fraction(2, 1), Fraction(1, 1), Fraction(4, 1), Fraction(3, 1), Fraction(6, 1), Fraction(5, 1), Fraction(8, 1), Fraction(7, 1), Fraction(10, 1), Fraction(9, 1), Fraction(12, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">numbers</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSet.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSet.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="PitchClassSegment"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSegment">[docs]</a><span class="k">class</span> <span class="nc">PitchClassSegment</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">PitchClassSegment</span><span class="p">):</span>
<div class="viewcode-block" id="PitchClassSegment.alpha"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSegment.alpha">[docs]</a>    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchClassSegment([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=1)</span>
<span class="sd">            PitchClassSegment([Fraction(1, 1), Fraction(0, 1), Fraction(3, 1), Fraction(2, 1), Fraction(5, 1), Fraction(4, 1), Fraction(7, 1), Fraction(6, 1), Fraction(9, 1), Fraction(8, 1), Fraction(11, 1), Fraction(10, 1)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchClassSegment([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=2)</span>
<span class="sd">            PitchClassSegment([Fraction(11, 1), Fraction(2, 1), Fraction(1, 1), Fraction(4, 1), Fraction(3, 1), Fraction(6, 1), Fraction(5, 1), Fraction(8, 1), Fraction(7, 1), Fraction(10, 1), Fraction(9, 1), Fraction(0, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">numbers</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchClassSegment.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchClassSegment.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitch_classes</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="PitchSegment"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSegment">[docs]</a><span class="k">class</span> <span class="nc">PitchSegment</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">PitchSegment</span><span class="p">):</span>
<div class="viewcode-block" id="PitchSegment.alpha"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSegment.alpha">[docs]</a>    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchSegment([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=1)</span>
<span class="sd">            PitchSegment([Fraction(1, 1), Fraction(0, 1), Fraction(3, 1), Fraction(2, 1), Fraction(5, 1), Fraction(4, 1), Fraction(7, 1), Fraction(6, 1), Fraction(9, 1), Fraction(8, 1), Fraction(11, 1), Fraction(10, 1)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.PitchSegment([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=2)</span>
<span class="sd">            PitchSegment([Fraction(-1, 1), Fraction(2, 1), Fraction(1, 1), Fraction(4, 1), Fraction(3, 1), Fraction(6, 1), Fraction(5, 1), Fraction(8, 1), Fraction(7, 1), Fraction(10, 1), Fraction(9, 1), Fraction(12, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">numbers</span><span class="p">)</span></div>

<div class="viewcode-block" id="PitchSegment.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.PitchSegment.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pitches</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="RatioClassSet"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioClassSet">[docs]</a><span class="k">class</span> <span class="nc">RatioClassSet</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">RatioClassSet</span><span class="p">):</span>
<div class="viewcode-block" id="RatioClassSet.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioClassSet.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="RatioSet"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioSet">[docs]</a><span class="k">class</span> <span class="nc">RatioSet</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">RatioSet</span><span class="p">):</span>
<div class="viewcode-block" id="RatioSet.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioSet.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="RatioClassSegment"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioClassSegment">[docs]</a><span class="k">class</span> <span class="nc">RatioClassSegment</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">RatioClassSegment</span><span class="p">):</span>
<div class="viewcode-block" id="RatioClassSegment.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioClassSegment.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_classes</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="RatioSegment"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioSegment">[docs]</a><span class="k">class</span> <span class="nc">RatioSegment</span><span class="p">(</span><span class="n">microtones</span><span class="o">.</span><span class="n">RatioSegment</span><span class="p">):</span>
<div class="viewcode-block" id="RatioSegment.to_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.RatioSegment.to_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">to_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratios</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">seq</span></div></div>


<div class="viewcode-block" id="Ratio"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Ratio">[docs]</a><span class="k">class</span> <span class="nc">Ratio</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Ratio</span><span class="p">):</span>
<div class="viewcode-block" id="Ratio.extract_sub_ratios"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Ratio.extract_sub_ratios">[docs]</a>    <span class="k">def</span> <span class="nf">extract_sub_ratios</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reciprocal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_fractions</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; ratio = evans.Ratio(&#39;9:8:7:6:5:4:3:2&#39;)</span>
<span class="sd">            &gt;&gt;&gt; ratio.extract_sub_ratios()</span>
<span class="sd">            Sequence([Ratio((1, 1)), Ratio((3, 2)), Ratio((2, 1)), Ratio((5, 2)), Ratio((3, 1)), Ratio((7, 2)), Ratio((4, 1)), Ratio((9, 2))])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; ratio = evans.Ratio(&#39;9:8:7:6:5:4:3:2&#39;)</span>
<span class="sd">            &gt;&gt;&gt; ratio.extract_sub_ratios(reciprocal=True)</span>
<span class="sd">            Sequence([Ratio((1, 1)), Ratio((2, 3)), Ratio((1, 2)), Ratio((2, 5)), Ratio((1, 3)), Ratio((2, 7)), Ratio((1, 4)), Ratio((2, 9))])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; ratio = evans.Ratio(&#39;9:8:7:6:5:4:3:2&#39;)</span>
<span class="sd">            &gt;&gt;&gt; ratio.extract_sub_ratios(as_fractions=True)</span>
<span class="sd">            Sequence([Fraction(1, 1), Fraction(3, 2), Fraction(2, 1), Fraction(5, 2), Fraction(3, 1), Fraction(7, 2), Fraction(4, 1), Fraction(9, 2)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; ratio = evans.Ratio(&#39;9:8:7:6:5:4:3:2&#39;)</span>
<span class="sd">            &gt;&gt;&gt; ratio.extract_sub_ratios(reciprocal=True, as_fractions=True)</span>
<span class="sd">            Sequence([Fraction(1, 1), Fraction(2, 3), Fraction(1, 2), Fraction(2, 5), Fraction(1, 3), Fraction(2, 7), Fraction(1, 4), Fraction(2, 9)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Ratio</span><span class="p">((</span><span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">numbers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">numbers</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">reciprocal</span><span class="p">:</span>
            <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span><span class="o">.</span><span class="n">reciprocal</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">returned_list</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">as_fractions</span><span class="p">:</span>
            <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">quicktions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_</span><span class="o">.</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">returned_list</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">returned_list</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence">[docs]</a><span class="k">class</span> <span class="nc">Sequence</span><span class="p">(</span><span class="n">baca</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
<div class="viewcode-block" id="Sequence.add_sequences"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.add_sequences">[docs]</a>    <span class="k">def</span> <span class="nf">add_sequences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, 2, 3])</span>
<span class="sd">            &gt;&gt;&gt; s.add_sequences([4, 5, 6, 7, 8])</span>
<span class="sd">            Sequence([4, 6, 8, 10])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, 2, 3, 4])</span>
<span class="sd">            &gt;&gt;&gt; s.add_sequences([5, 6, 7, 8])</span>
<span class="sd">            Sequence([5, 7, 9, 11, 9])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="n">returned_sequence</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cyc_y</span> <span class="o">=</span> <span class="n">CyclicList</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">forget</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">y_val</span> <span class="o">=</span> <span class="n">cyc_y</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">returned_sequence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">+</span> <span class="n">y_val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.alpha"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.alpha">[docs]</a>    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=1)</span>
<span class="sd">            Sequence([1, 0, 3, 2, 5, 4, 7, 6, 9, 8, 11, 10])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([_ for _ in range(12)])</span>
<span class="sd">            &gt;&gt;&gt; s.alpha(category=2)</span>
<span class="sd">            Sequence([-1, 2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">_</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span>
                <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">abjad</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">is_integer_equivalent_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">fraction_part</span> <span class="o">=</span> <span class="n">_</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                    <span class="n">_</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_integer</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">+=</span> <span class="n">fraction_part</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="n">numbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">numbers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.combination_addition"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.combination_addition">[docs]</a>    <span class="k">def</span> <span class="nf">combination_addition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; import quicktions</span>
<span class="sd">            &gt;&gt;&gt; l = [2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; l = [quicktions.Fraction(_) for _ in l]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combination_addition(2)</span>
<span class="sd">            Sequence([Fraction(5, 4), Fraction(3, 2), Fraction(7, 4)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">as_set</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">multiples</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sequence</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">comb</span><span class="p">]</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">multiples</span><span class="p">)</span><span class="o">.</span><span class="n">constrain_to_octave</span><span class="p">()</span><span class="o">.</span><span class="n">sorted</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span><span class="o">.</span><span class="n">to_sequence</span><span class="p">()</span></div>

<div class="viewcode-block" id="Sequence.combination_division"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.combination_division">[docs]</a>    <span class="k">def</span> <span class="nf">combination_division</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; import quicktions</span>
<span class="sd">            &gt;&gt;&gt; l = [2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; l = [quicktions.Fraction(_) for _ in l]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combination_division(2)</span>
<span class="sd">            Sequence([Fraction(1, 2), Fraction(2, 3), Fraction(3, 4)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">as_set</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">multiples</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sequence</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">divide_all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">comb</span><span class="p">]</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">multiples</span><span class="p">)</span><span class="o">.</span><span class="n">constrain_to_octave</span><span class="p">()</span><span class="o">.</span><span class="n">sorted</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span><span class="o">.</span><span class="n">to_sequence</span><span class="p">()</span></div>

<div class="viewcode-block" id="Sequence.combination_multiplication"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.combination_multiplication">[docs]</a>    <span class="k">def</span> <span class="nf">combination_multiplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; import quicktions</span>
<span class="sd">            &gt;&gt;&gt; l = [2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; l = [quicktions.Fraction(_) for _ in l]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combination_multiplication(2)</span>
<span class="sd">            Sequence([Fraction(1, 1), Fraction(3, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">as_set</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">multiples</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sequence</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">multiply_all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">comb</span><span class="p">]</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">multiples</span><span class="p">)</span><span class="o">.</span><span class="n">constrain_to_octave</span><span class="p">()</span><span class="o">.</span><span class="n">sorted</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">RatioSet</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span><span class="o">.</span><span class="n">to_sequence</span><span class="p">()</span></div>

<div class="viewcode-block" id="Sequence.combination_subtraction"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.combination_subtraction">[docs]</a>    <span class="k">def</span> <span class="nf">combination_subtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; import quicktions</span>
<span class="sd">            &gt;&gt;&gt; l = [2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; l = [quicktions.Fraction(_) for _ in l]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combination_subtraction(2)</span>
<span class="sd">            Sequence([Fraction(10, 1), Fraction(11, 1)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">as_set</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">multiples</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sequence</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">subtract_all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">comb</span><span class="p">]</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">PitchClassSet</span><span class="p">(</span><span class="n">multiples</span><span class="p">)</span><span class="o">.</span><span class="n">sorted</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">PitchClassSet</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span><span class="o">.</span><span class="n">to_sequence</span><span class="p">()</span></div>

<div class="viewcode-block" id="Sequence.combinations"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.combinations">[docs]</a>    <span class="k">def</span> <span class="nf">combinations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">as_set</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; l = [2, 2, 3, 3, 4, 4]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combinations(2)</span>
<span class="sd">            Sequence([(2, 2), (2, 3), (2, 3), (2, 4), (2, 4), (2, 3), (2, 3), (2, 4), (2, 4), (3, 3), (3, 4), (3, 4), (3, 4), (3, 4), (4, 4)])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; l = [2, 2, 3, 3, 4, 4]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).combinations(2, as_set=True)</span>
<span class="sd">            Sequence([(4, 4), (2, 4), (3, 4), (2, 3), (3, 3), (2, 2)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="n">size</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">as_set</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.chen"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.chen">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">chen</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">time_values</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; c = evans.Sequence.chen(</span>
<span class="sd">            ...     a=40,</span>
<span class="sd">            ...     b=3,</span>
<span class="sd">            ...     c=28,</span>
<span class="sd">            ...     first_state=[-0.1, 0.5, -0.6],</span>
<span class="sd">            ...     time_values=[0.0, 40.0, 0.01],</span>
<span class="sd">            ...     iters=10,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            &gt;&gt;&gt; print(c)</span>
<span class="sd">            Sequence([[-0.1, 0.12465461315287765, 0.34050473218831634, 0.5770360314308272, 0.8626644815821614, 1.228312639285715, 1.7104499742301047, 2.3534686146396937, 3.210342581973768, 4.338499963066017], [0.5, 0.6622702530766478, 0.8942439508177749, 1.2176463222616842, 1.66295375321105, 2.2713555330407695, 3.0965468523002206, 4.204669803361282, 5.6680291136883945, 7.542293510840843], [-0.6, -0.5821525955103403, -0.5631370288024949, -0.5417183868578875, -0.5155298081524363, -0.48013350192305393, -0.4273027100127936, -0.34198524404844655, -0.19722719758314597, 0.05337630134609778]])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">vector_calc</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">state</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
                <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
                <span class="o">+</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
                <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">)),</span>
            <span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">time_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">states</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">vector_calc</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
            <span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.derive_added_sequences"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.derive_added_sequences">[docs]</a>    <span class="k">def</span> <span class="nf">derive_added_sequences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([0, 1, 2, 3]).derive_added_sequences([4, 5, 6, 7, 8]):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [4, 5, 6, 7]</span>
<span class="sd">            [5, 6, 7, 8]</span>
<span class="sd">            [6, 7, 8, 9]</span>
<span class="sd">            [7, 8, 9, 10]</span>
<span class="sd">            [8, 9, 10, 11]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([0, 1, 2, 3, 4]).derive_added_sequences([5, 6, 7, 8]):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [5, 6, 7, 8, 9]</span>
<span class="sd">            [6, 7, 8, 9, 10]</span>
<span class="sd">            [7, 8, 9, 10, 11]</span>
<span class="sd">            [8, 9, 10, 11, 12]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4]).derive_added_sequences([5, 6, 7, 8], flat=True)</span>
<span class="sd">            Sequence([5, 6, 7, 8, 9, 6, 7, 8, 9, 10, 7, 8, 9, 10, 11, 8, 9, 10, 11, 12])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="n">returned_sequence</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="n">transposition</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">val_</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="n">transposition</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="n">val_</span><span class="p">)</span>
            <span class="n">returned_sequence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">transposition</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flat</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">returned_sequence</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="n">returned_sequence</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.derive_multiplied_sequences"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.derive_multiplied_sequences">[docs]</a>    <span class="k">def</span> <span class="nf">derive_multiplied_sequences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([0, 1, 2, 3]).derive_multiplied_sequences([4, 5, 6, 7, 8]):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [0, 4, 8, 12]</span>
<span class="sd">            [0, 5, 10, 15]</span>
<span class="sd">            [0, 6, 12, 18]</span>
<span class="sd">            [0, 7, 14, 21]</span>
<span class="sd">            [0, 8, 16, 24]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([0, 1, 2, 3, 4]).derive_multiplied_sequences([5, 6, 7, 8]):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [0, 5, 10, 15, 20]</span>
<span class="sd">            [0, 6, 12, 18, 24]</span>
<span class="sd">            [0, 7, 14, 21, 28]</span>
<span class="sd">            [0, 8, 16, 24, 32]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4]).derive_multiplied_sequences([5, 6, 7, 8], flat=True)</span>
<span class="sd">            Sequence([0, 5, 10, 15, 20, 0, 6, 12, 18, 24, 0, 7, 14, 21, 28, 0, 8, 16, 24, 32])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="n">returned_sequence</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="n">transposition</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">val_</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="n">transposition</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="n">val_</span><span class="p">)</span>
            <span class="n">returned_sequence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">transposition</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flat</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">returned_sequence</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="n">returned_sequence</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.divide_all"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.divide_all">[docs]</a>    <span class="k">def</span> <span class="nf">divide_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; l = [1, 2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).divide_all()</span>
<span class="sd">            Sequence([0.041666666666666664])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">x</span> <span class="o">/=</span> <span class="n">_</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">x</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.e_bonacci_cycle"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.e_bonacci_cycle">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e_bonacci_cycle</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">iters</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">modulus</span><span class="p">,</span> <span class="n">wrap_to_zero</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.e_bonacci_cycle(n=3, iters=15, first=1, second=1, modulus=7)</span>
<span class="sd">            Sequence([1, 1, 2, 4, 7, 6, 3, 2, 4, 2, 1, 7, 3])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">final</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">iters</span>
        <span class="n">final</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
        <span class="n">final</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">second</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">bound</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">dist</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">final</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">bound</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">x</span>
            <span class="n">final</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">final</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[(</span><span class="n">_</span> <span class="o">%</span> <span class="n">modulus</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">final</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">wrap_to_zero</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">sequence</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span> <span class="o">+</span> <span class="n">modulus</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.e_dovan_cycle"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.e_dovan_cycle">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e_dovan_cycle</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">iters</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">modulus</span><span class="p">,</span> <span class="n">wrap_to_zero</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.e_dovan_cycle(n=3, iters=15, first=1, second=1, modulus=7)</span>
<span class="sd">            Sequence([1, 1, 1, 2, 3, 4, 6, 2, 6, 5, 7, 6, 4])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">iters</span> <span class="o">=</span> <span class="n">iters</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">final</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">iters</span>
        <span class="n">final</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
        <span class="n">final</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">second</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">final</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span> <span class="p">:]):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="n">bound</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">dist</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">final</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">:</span> <span class="n">bound</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">x</span>
            <span class="n">final</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">final</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[(</span><span class="n">_</span> <span class="o">%</span> <span class="n">modulus</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">final</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">wrap_to_zero</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">sequence</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span> <span class="o">+</span> <span class="n">modulus</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.feigenbaum_bifurcations"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.feigenbaum_bifurcations">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">feigenbaum_bifurcations</span><span class="p">(</span>
        <span class="n">class_</span><span class="p">,</span> <span class="n">fertility</span><span class="o">=</span><span class="mf">3.59785</span><span class="p">,</span> <span class="n">initial_state</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.feigenbaum_bifurcations(fertility= 2.3, initial_state=0.5, iterations=4)</span>
<span class="sd">            Sequence([0.5, 0.575, 0.5620625, 0.5661409660156249, 0.5649383570133959])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_</span> <span class="o">=</span> <span class="p">[</span><span class="n">initial_state</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">front</span> <span class="o">=</span> <span class="n">fertility</span> <span class="o">*</span> <span class="n">initial_state</span>
            <span class="n">back</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">initial_state</span>
            <span class="n">next_state</span> <span class="o">=</span> <span class="n">front</span> <span class="o">*</span> <span class="n">back</span>
            <span class="n">list_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_state</span><span class="p">)</span>
            <span class="n">initial_state</span> <span class="o">=</span> <span class="n">next_state</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.grouper"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.grouper">[docs]</a>    <span class="k">def</span> <span class="nf">grouper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4, 5, 6, 7]).grouper([1, 1, 2, 1, 3])</span>
<span class="sd">            Sequence([0, 1, [2, 3], 4, [5, 6, 7]])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">cyc</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">lst</span><span class="p">[</span><span class="n">c</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)]</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">lst1</span> <span class="o">=</span> <span class="n">cyc</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span>
            <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">lst1</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">lst1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.guerrero_morales"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.guerrero_morales">[docs]</a>    <span class="k">def</span> <span class="nf">guerrero_morales</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">set_size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; g_m = evans.Sequence([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;]).guerrero_morales(3)</span>
<span class="sd">            &gt;&gt;&gt; for _ in g_m:</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;D&#39;, &#39;F&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;D&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;E&#39;, &#39;F&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;F&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;E&#39;, &#39;G&#39;]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;]).guerrero_morales(5):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;]).guerrero_morales(4):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;E&#39;, &#39;H&#39;, &#39;I&#39;]</span>
<span class="sd">            [&#39;D&#39;, &#39;E&#39;, &#39;J&#39;, &#39;K&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;E&#39;, &#39;L&#39;, &#39;M&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;F&#39;, &#39;H&#39;, &#39;J&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;G&#39;, &#39;I&#39;, &#39;K&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;H&#39;, &#39;K&#39;, &#39;L&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;I&#39;, &#39;J&#39;, &#39;M&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;G&#39;, &#39;J&#39;, &#39;L&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;F&#39;, &#39;K&#39;, &#39;M&#39;]</span>
<span class="sd">            [&#39;D&#39;, &#39;F&#39;, &#39;I&#39;, &#39;L&#39;]</span>
<span class="sd">            [&#39;D&#39;, &#39;G&#39;, &#39;H&#39;, &#39;M&#39;]</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; for _ in evans.Sequence([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;]).guerrero_morales(3):</span>
<span class="sd">            ...     _</span>
<span class="sd">            ...</span>
<span class="sd">            [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;D&#39;, &#39;F&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;D&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;E&#39;, &#39;F&#39;]</span>
<span class="sd">            [&#39;B&#39;, &#39;F&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;C&#39;, &#39;E&#39;, &#39;G&#39;]</span>
<span class="sd">            [&#39;A&#39;, &#39;H&#39;, &#39;I&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">terms</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">combinations</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="n">set_size</span><span class="p">)]</span>
        <span class="n">pairs_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
            <span class="n">temp_pairs_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">temp_returned_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">term_relevant_sets</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">combinations</span> <span class="k">if</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">term_relevant_set</span> <span class="ow">in</span> <span class="n">term_relevant_sets</span><span class="p">:</span>
                <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">term_relevant_set</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
                <span class="n">val</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="ow">in</span> <span class="n">pairs_list</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                    <span class="n">temp_pairs_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pairs</span><span class="p">)</span>
                    <span class="n">temp_returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term_relevant_set</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_pairs_list</span><span class="p">):</span>
                <span class="n">pairs_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">temp_pairs_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">temp_returned_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.henon"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.henon">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">henon</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; h = evans.Sequence.henon(</span>
<span class="sd">            ...     first_state=[(-0.75), 0.32],</span>
<span class="sd">            ...     a=1.2,</span>
<span class="sd">            ...     b=0.3,</span>
<span class="sd">            ...     iters=10,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            &gt;&gt;&gt; h</span>
<span class="sd">            Sequence([[-0.75, Decimal(&#39;0.6450000000000000316413562021&#39;), Decimal(&#39;0.2757699999999999778210746366&#39;), Decimal(&#39;1.102241088520000020387803903&#39;), Decimal(&#39;-0.375191500666105380643309098&#39;), Decimal(&#39;1.161749931949499014986033708&#39;), Decimal(&#39;-0.7321529354614302607193373836&#39;), Decimal(&#39;0.7052674744991025979072557961&#39;), Decimal(&#39;0.1834714666579601521199694779&#39;), Decimal(&#39;1.171186107456583192487843126&#39;), Decimal(&#39;-0.590970837961775774691947209&#39;)], [0.32, Decimal(&#39;-0.2249999999999999916733273153&#39;), Decimal(&#39;0.1935000000000000023314683518&#39;), Decimal(&#39;0.08273099999999999028466035597&#39;), Decimal(&#39;0.3306723265559999938790068193&#39;), Decimal(&#39;-0.1125574501998316100275303026&#39;), Decimal(&#39;0.3485249795848496915977948793&#39;), Decimal(&#39;-0.2196458806384290700872707501&#39;), Decimal(&#39;0.2115802423497307715421348517&#39;), Decimal(&#39;0.05504143999738804359904837692&#39;), Decimal(&#39;0.3513558322369749447435751116&#39;)]])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_coordinates</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_state</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">y_coordinates</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_state</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
            <span class="n">prev_x</span> <span class="o">=</span> <span class="n">x_coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">prev_y</span> <span class="o">=</span> <span class="n">y_coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x_coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">prev_y</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">prev_x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
            <span class="p">)</span>
            <span class="n">y_coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">prev_x</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">([</span><span class="n">x_coordinates</span><span class="p">,</span> <span class="n">y_coordinates</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.hexagonal_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.hexagonal_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">hexagonal_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; seq = evans.Sequence([_ for _ in range(8)]).hexagonal_sequence()</span>
<span class="sd">            &gt;&gt;&gt; seq</span>
<span class="sd">            Sequence([0, 1, 6, 15, 28, 45, 66, 91])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">n_list</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.josephus"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.josephus">[docs]</a>    <span class="k">def</span> <span class="nf">josephus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; tone_row = [0, 1, 2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; for i in range(16):</span>
<span class="sd">            ...     evans.Sequence(tone_row).josephus(i + 2)</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 2, 3, 4], [0, 2, 4], [2, 4], [2]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 3, 4], [1, 3, 4], [1, 3], [3]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 4], [0, 1, 4], [0, 1], [0]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 3], [1, 2, 3], [1, 3], [1]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [1, 2, 3, 4], [1, 3, 4], [3, 4], [3]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 2, 3, 4], [0, 2, 3], [2, 3], [3]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 3, 4], [0, 3, 4], [0, 3], [0]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 4], [0, 1, 2], [0, 1], [1]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 3], [0, 2, 3], [0, 3], [3]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 4], [2, 4], [4]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 2, 3, 4], [2, 3, 4], [2, 3], [2]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 3, 4], [0, 1, 4], [0, 1], [1]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 4], [1, 2, 4], [1, 4], [4]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 1, 2, 3], [0, 1, 3], [0, 3], [0]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3], [2, 3], [2]])</span>
<span class="sd">            Sequence([[0, 1, 2, 3, 4], [0, 2, 3, 4], [0, 3, 4], [0, 3], [3]])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; tone_row = [0, 1, 2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; for i in range(16):</span>
<span class="sd">            ...     evans.Sequence(tone_row).josephus(i + 2).flatten()</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 2, 3, 4, 0, 2, 4, 2, 4, 2])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 3, 4, 1, 3, 4, 1, 3, 3])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 4, 0, 1, 4, 0, 1, 0])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 3, 1, 2, 3, 1, 3, 1])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 1, 2, 3, 4, 1, 3, 4, 3, 4, 3])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 2, 3, 4, 0, 2, 3, 2, 3, 3])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 3, 4, 0, 3, 4, 0, 3, 0])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 4, 0, 1, 2, 0, 1, 1])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 3, 0, 2, 3, 0, 3, 3])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 4, 2, 4, 4])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 2, 3, 4, 2, 3, 4, 2, 3, 2])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 3, 4, 0, 1, 4, 0, 1, 1])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 4, 1, 2, 4, 1, 4, 4])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 1, 2, 3, 0, 1, 3, 0, 3, 0])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 2, 3, 2])</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 0, 2, 3, 4, 0, 3, 4, 0, 3, 3])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">p</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">seq</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[]</span>
        <span class="n">returned_sequences</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)]</span>
        <span class="k">while</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">sequences</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="nb">next</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sequences</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
            <span class="nb">next</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
            <span class="n">sequences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">next</span><span class="p">)</span>
            <span class="n">returned_sequences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">retain</span><span class="p">(</span><span class="nb">next</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_sequences</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.linear_asymmetric_inversion"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.linear_asymmetric_inversion">[docs]</a>    <span class="k">def</span> <span class="nf">linear_asymmetric_inversion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 3, 4, 7, 9]).linear_asymmetric_inversion()</span>
<span class="sd">            [-3, 2, 1, 5]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">pitch1</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">pitch2</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NamedInterval</span><span class="o">.</span><span class="n">from_pitch_carriers</span><span class="p">(</span><span class="n">pitch1</span><span class="p">,</span> <span class="n">pitch2</span><span class="p">)</span>
            <span class="n">inverted_interval</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">NamedInterval</span><span class="p">(</span><span class="s2">&quot;P1&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">interval</span>
            <span class="n">new_pitch</span> <span class="o">=</span> <span class="n">inverted_interval</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">NumberedPitch</span><span class="p">(</span><span class="n">pitch1</span><span class="p">))</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pitch</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="Sequence.lindenmayer"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.lindenmayer">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">lindenmayer</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">seed</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; rule_dict = { &quot;A&quot;: &quot;ABA&quot; , &quot;B&quot;: &quot;BC&quot;, &quot;C&quot;: &quot;BAC&quot;}</span>
<span class="sd">            &gt;&gt;&gt; lind_list = evans.Sequence.lindenmayer(seed=&#39;AB&#39;, rules=rule_dict, iters=2)</span>
<span class="sd">            &gt;&gt;&gt; lind_list</span>
<span class="sd">            Sequence([&#39;A&#39;, &#39;B&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;A&#39;, &#39;B&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;B&#39;, &#39;A&#39;, &#39;C&#39;])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="n">seed</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axiom</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="n">rules</span><span class="p">[</span><span class="n">axiom</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="n">axiom</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.lorenz"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.lorenz">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">lorenz</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">time_values</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.lorenz(</span>
<span class="sd">            ...     rho=28.0,</span>
<span class="sd">            ...     sigma=10.0,</span>
<span class="sd">            ...     beta=(8.0 / 3.0),</span>
<span class="sd">            ...     first_state=[1.0, 1.0, 1.0],</span>
<span class="sd">            ...     time_values=[0.0, 40.0, 0.01],</span>
<span class="sd">            ...     iters=10,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([[1.0, 1.0125657408032651, 1.0488214579592021, 1.107206299034454, 1.1868654842333801, 1.2875548011090359, 1.4095688012763303, 1.5536887870511105, 1.721145788631946, 1.9135963877769706], [1.0, 1.2599200056984277, 1.5240008388892068, 1.798314577764884, 2.0885455352781572, 2.400160398825767, 2.738552104480127, 3.109160997057688, 3.51757713188136, 3.969623487737072], [1.0, 0.9848910446848755, 0.973114341630953, 0.9651591023109144, 0.9617373815250438, 0.9638062240116604, 0.9726082787069016, 0.9897311952182216, 1.0171865646618774, 1.057511871629279]])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">vector_calc</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">state</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">rho</span><span class="p">)</span> <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
                <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">),</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">time_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">states</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">vector_calc</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
            <span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.lu_chen"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.lu_chen">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">lu_chen</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">time_values</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.lu_chen(</span>
<span class="sd">            ...     a=36,</span>
<span class="sd">            ...     b=3,</span>
<span class="sd">            ...     c=20,</span>
<span class="sd">            ...     u=(-15.15),</span>
<span class="sd">            ...     first_state=[0.1, 0.3, -0.6],</span>
<span class="sd">            ...     time_values=[0.0, 40.0, 0.01],</span>
<span class="sd">            ...     iters=10,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([[0.1, 0.14507340240351432, 0.14323815901530343, 0.10128972203257065, 0.02212510661501916, -0.09446533541055804, -0.25134777506809247, -0.4538520580544356, -0.7097811725420128, -1.0295889433224696], [0.3, 0.20092880055892573, 0.08027594159872467, -0.06748948170440211, -0.2490165225972874, -0.4723839158805826, -0.7474651998093496, -1.0863625805752994, -1.503923707544488, -2.0183521101080717], [-0.6, -0.5819559886254813, -0.5645492876975078, -0.547848676066436, -0.5317444633853425, -0.5158905397379729, -0.4995950638053594, -0.48163813037580305, -0.4599814138948388, -0.43131546553144084]])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">vector_calc</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">state</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
                <span class="o">+</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="o">+</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">u</span><span class="p">),</span>
                <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">z</span><span class="p">)),</span>
            <span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">time_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">time_values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">states</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">vector_calc</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">states</span><span class="p">[:</span><span class="n">iters</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
            <span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.mandelbrot_set"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.mandelbrot_set">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">mandelbrot_set</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">maxiter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.mandelbrot_set(</span>
<span class="sd">            ... xmin=7,</span>
<span class="sd">            ... xmax=10,</span>
<span class="sd">            ... ymin=7,</span>
<span class="sd">            ... ymax=10,</span>
<span class="sd">            ... width=10,</span>
<span class="sd">            ... height=10,</span>
<span class="sd">            ... maxiter=10,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([array([ 7.        ,  7.33333333,  7.66666667,  8.        ,  8.33333333,</span>
<span class="sd">                    8.66666667,  9.        ,  9.33333333,  9.66666667, 10.        ]), array([ 7.        ,  7.33333333,  7.66666667,  8.        ,  8.33333333,</span>
<span class="sd">                    8.66666667,  9.        ,  9.33333333,  9.66666667, 10.        ]), array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],</span>
<span class="sd">                   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]])])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">mandelbrot</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">maxiter</span><span class="p">):</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">c</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxiter</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">n</span>
                <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">+</span> <span class="n">c</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">n3</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
                <span class="n">n3</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">mandelbrot</span><span class="p">(</span><span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">r2</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">maxiter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">([</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">n3</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.map_dict"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.map_dict">[docs]</a>    <span class="k">def</span> <span class="nf">map_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; mapping_dict = {</span>
<span class="sd">            ...     &quot;A&quot;: 0,</span>
<span class="sd">            ...     &quot;B&quot;: 1,</span>
<span class="sd">            ...     &quot;C&quot;: 2,</span>
<span class="sd">            ...     &quot;D&quot;: 3,</span>
<span class="sd">            ... }</span>
<span class="sd">            ...</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence([&quot;A&quot;, &quot;C&quot;, &quot;B&quot;, &quot;D&quot;]).map_dict(mapping_dict)</span>
<span class="sd">            Sequence([0, 2, 1, 3])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">returned_seq</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">mapping_dict</span><span class="p">[</span><span class="n">_</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">returned_seq</span></div>

<div class="viewcode-block" id="Sequence.map_indices"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.map_indices">[docs]</a>    <span class="k">def</span> <span class="nf">map_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([2, 3, 4, 5]).map_indices([0, 0, 1, 0, 2, 3, 2])</span>
<span class="sd">            Sequence([2, 2, 3, 2, 4, 5, 4])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">items_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">index_list</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">items_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.markov"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.markov">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">markov</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">transition_prob</span><span class="p">,</span> <span class="n">first_state</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">seed</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; prob = {</span>
<span class="sd">            ...     &quot;one&quot;: {&quot;one&quot;: 0.8, &quot;two&quot;: 0.19, &quot;three&quot;: 0.01},</span>
<span class="sd">            ...     &quot;two&quot;: {&quot;one&quot;: 0.2, &quot;two&quot;: 0.7, &quot;three&quot;: 0.1},</span>
<span class="sd">            ...     &quot;three&quot;: {&quot;one&quot;: 0.1, &quot;two&quot;: 0.2, &quot;three&quot;: 0.7},</span>
<span class="sd">            ... }</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence.markov(</span>
<span class="sd">            ...     transition_prob=prob,</span>
<span class="sd">            ...     first_state=&quot;one&quot;,</span>
<span class="sd">            ...     length=14,</span>
<span class="sd">            ...     seed=7,</span>
<span class="sd">            ... )</span>
<span class="sd">            Sequence([&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;, &#39;two&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;, &#39;one&#39;])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">transition_prob</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">chain</span><span class="o">.</span><span class="n">generate_states</span><span class="p">(</span><span class="n">current_state</span><span class="o">=</span><span class="n">first_state</span><span class="p">,</span> <span class="n">no</span><span class="o">=</span><span class="n">length</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">class_</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seq</span></div>

<div class="viewcode-block" id="Sequence.matrix"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.matrix">[docs]</a>    <span class="k">def</span> <span class="nf">matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">padded</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, [1, 2], 3, [4, 5, 6, 7], [7, 8], 9]).matrix()</span>
<span class="sd">            Sequence([[Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1), Fraction(4, 1), Fraction(5, 1), Fraction(6, 1), Fraction(7, 1), Fraction(7, 1), Fraction(8, 1), Fraction(9, 1)], [Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1), Fraction(4, 1), Fraction(5, 1), Fraction(6, 1), Fraction(6, 1), Fraction(7, 1), Fraction(8, 1)], [Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1), Fraction(4, 1), Fraction(5, 1), Fraction(5, 1), Fraction(6, 1), Fraction(7, 1)], [Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1), Fraction(4, 1), Fraction(4, 1), Fraction(5, 1), Fraction(6, 1)], [Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1), Fraction(3, 1), Fraction(4, 1), Fraction(5, 1)], [Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1), Fraction(2, 1), Fraction(3, 1), Fraction(4, 1)], [Fraction(-6, 1), Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1), Fraction(1, 1), Fraction(2, 1), Fraction(3, 1)], [Fraction(-7, 1), Fraction(-6, 1), Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1)], [Fraction(-7, 1), Fraction(-6, 1), Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(0, 1), Fraction(1, 1), Fraction(2, 1)], [Fraction(-8, 1), Fraction(-7, 1), Fraction(-6, 1), Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(-1, 1), Fraction(0, 1), Fraction(1, 1)], [Fraction(-9, 1), Fraction(-8, 1), Fraction(-7, 1), Fraction(-6, 1), Fraction(-5, 1), Fraction(-4, 1), Fraction(-3, 1), Fraction(-2, 1), Fraction(-2, 1), Fraction(-1, 1), Fraction(0, 1)]])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, [1, 2], 3, [4, 5, 6, 7], [7, 8], 9]).matrix(padded=True)</span>
<span class="sd">            Sequence([[0, None, None, None], [1, 2, None, None], [3, None, None, None], [4, 5, 6, 7], [7, 8, None, None], [9, None, None, None]])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">padded</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">PitchSegment</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
            <span class="n">inverted_row</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">material</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">row</span><span class="p">)</span><span class="o">.</span><span class="n">derive_added_sequences</span><span class="p">(</span><span class="n">inverted_row</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">material</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">temp</span> <span class="o">+=</span> <span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">+=</span> <span class="p">[</span><span class="n">_</span><span class="p">]</span>
            <span class="n">sorted_self</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">largest</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sorted_self</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
                <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">largest</span><span class="p">:</span>
                    <span class="n">_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.mirror"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.mirror">[docs]</a>    <span class="k">def</span> <span class="nf">mirror</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequential_duplicates</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     evans.Sequence([0, 1, 2, 3]).mirror(</span>
<span class="sd">            ...         sequential_duplicates=True,</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            Sequence([0, 1, 2, 3, 3, 2, 1, 0])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     evans.Sequence([0, 1, 2, 3]).mirror(</span>
<span class="sd">            ...         sequential_duplicates=False,</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            Sequence([0, 1, 2, 3, 2, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sequential_duplicates</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">lst</span> <span class="o">+</span> <span class="n">lst</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">lst</span> <span class="o">+</span> <span class="n">lst</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.mod"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.mod">[docs]</a>    <span class="k">def</span> <span class="nf">mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modulus</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([7, 8, 9, 10]).mod(7)</span>
<span class="sd">            Sequence([7, 1, 2, 3])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([7, 8, 9, 10]).mod(7, indices=True)</span>
<span class="sd">            Sequence([0, 1, 2, 3])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_seq</span> <span class="o">=</span> <span class="p">[(</span><span class="n">_</span> <span class="o">%</span> <span class="n">modulus</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_seq</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">indices</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">new_seq</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span> <span class="o">+</span> <span class="n">modulus</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">new_seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.multiply"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([7, 8, 9, 10]).multiply(7)</span>
<span class="sd">            Sequence([49, 56, 63, 70])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([7, 8, 9, 10]).multiply((12 / 10))</span>
<span class="sd">            Sequence([8.4, 9.6, 10.799999999999999, 12.0])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l_</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">l_</span><span class="p">:</span>
            <span class="n">returned_seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.multiply_all"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.multiply_all">[docs]</a>    <span class="k">def</span> <span class="nf">multiply_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([7, 8, 9, 10]).multiply_all()</span>
<span class="sd">            Sequence([5040])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">*=</span> <span class="n">_</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">x</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.multiply_sequences"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.multiply_sequences">[docs]</a>    <span class="k">def</span> <span class="nf">multiply_sequences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).multiply_sequences([4, 5, 6, 7, 8])</span>
<span class="sd">            Sequence([0, 5, 12, 21])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4]).multiply_sequences([5, 6, 7, 8])</span>
<span class="sd">            Sequence([0, 6, 14, 24, 20])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_sequence</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cyc_y</span> <span class="o">=</span> <span class="n">CyclicList</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">forget</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">y_val</span> <span class="o">=</span> <span class="n">cyc_y</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">returned_sequence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">*</span> <span class="n">y_val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.n_bonacci_cycle"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.n_bonacci_cycle">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">n_bonacci_cycle</span><span class="p">(</span>
        <span class="n">class_</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">first_number</span><span class="p">,</span> <span class="n">second_number</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">modulus</span><span class="p">,</span> <span class="n">wrap_to_zero</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.n_bonacci_cycle(n=3, first_number=1, second_number=3, length=8, modulus=7)</span>
<span class="sd">            Sequence([1, 3, 3, 5, 4, 3, 6, 7, 6, 4])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_number</span><span class="p">,</span> <span class="n">second_number</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
            <span class="n">sequence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sequence</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sequence</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[(</span><span class="n">_</span> <span class="o">%</span> <span class="n">modulus</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">wrap_to_zero</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">sequence</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span> <span class="o">+</span> <span class="n">modulus</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.normalize_to_sum"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.normalize_to_sum">[docs]</a>    <span class="k">def</span> <span class="nf">normalize_to_sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desired_sum</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; weights = [15, 6, 14, 4, 16, 6, 14, 4, 16, 5]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(weights).normalize_to_sum(1)</span>
<span class="sd">            Sequence([0.15, 0.06, 0.14, 0.04, 0.16, 0.06, 0.14, 0.04, 0.16, 0.05])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">integer_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">integer_list</span><span class="p">:</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">_</span> <span class="o">/</span> <span class="n">desired_sum</span>
        <span class="n">normalized_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">integer_list</span><span class="p">:</span>
            <span class="n">normalized_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">normalized_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.normalize_to_indices"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.normalize_to_indices">[docs]</a>    <span class="k">def</span> <span class="nf">normalize_to_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([1, 0.24, -12, [-4, 0.7], -0.5]).normalize_to_indices()</span>
<span class="sd">            Sequence([4, 1, -50, Sequence([-5, 1]), -2])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">flat_raw</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">raw_list</span><span class="p">)]</span>
        <span class="n">minimum_value</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flat_raw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">minimum_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">minimum_value</span> <span class="o">=</span> <span class="mf">0.000001</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">raw_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Sequence</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="o">.</span><span class="n">normalize_to_indices</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">/</span> <span class="n">minimum_value</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.orbits"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.orbits">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">orbits</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">initial_state</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.orbits(initial_state=0.4, iterations=5)</span>
<span class="sd">            Sequence([0.96, 0.15360000000000013, 0.5200281600000003, 0.9983954912280576, 0.006407737294172653])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">front</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">initial_state</span>
            <span class="n">back</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">initial_state</span>
            <span class="n">next_state</span> <span class="o">=</span> <span class="n">front</span> <span class="o">*</span> <span class="n">back</span>
            <span class="n">list_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_state</span><span class="p">)</span>
            <span class="n">initial_state</span> <span class="o">=</span> <span class="n">next_state</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.permutations"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.permutations">[docs]</a>    <span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2]).permutations()</span>
<span class="sd">            Sequence([[0, 1, 2], [0, 2, 1], [1, 0, 2], [1, 2, 0], [2, 0, 1], [2, 1, 0]])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, [1, 2], 3]).permutations()</span>
<span class="sd">            Sequence([[0, [1, 2], 3], [0, 3, [1, 2]], [[1, 2], 0, 3], [[1, 2], 3, 0], [3, 0, [1, 2]], [3, [1, 2], 0]])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">lst</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">list_</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">ba</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">lst</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">ba</span><span class="p">)</span><span class="o">.</span><span class="n">permutations</span><span class="p">():</span>
                    <span class="n">list_</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">list_</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.pitch_warp"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.pitch_warp">[docs]</a>    <span class="k">def</span> <span class="nf">pitch_warp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warp_values</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span> <span class="o">*</span><span class="p">,</span> <span class="n">boolean_vector</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4]).pitch_warp([0.5, -0.5], boolean_vector=[0, 1, 1])</span>
<span class="sd">            Sequence([0, 1.5, 1.5, 3, 4.5])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pitch_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">warp_count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">bool_count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">CyclicList</span><span class="p">(</span><span class="n">warp_values</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">warp_count</span><span class="p">,</span> <span class="n">forget</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">CyclicList</span><span class="p">(</span><span class="n">boolean_vector</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">bool_count</span><span class="p">,</span> <span class="n">forget</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">bool_values</span> <span class="o">=</span> <span class="n">b</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">pitch_list</span><span class="p">))</span>
        <span class="n">pairs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bool_values</span><span class="p">,</span> <span class="n">pitch_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pairs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pitch_list</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                        <span class="n">warp_value</span> <span class="o">=</span> <span class="n">w</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">pitch_list</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="n">pitch_list</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">p</span><span class="p">]</span> <span class="o">+</span> <span class="n">warp_value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">warp_value</span> <span class="o">=</span> <span class="n">w</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">pitch_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">pitch_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">warp_value</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">pitch_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.potamia"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.potamia">[docs]</a>    <span class="k">def</span> <span class="nf">potamia</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">retrograde</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, [2, 3, 4], 5, [6, 7]]).matrix(padded=True)</span>
<span class="sd">            &gt;&gt;&gt; s = s.potamia()</span>
<span class="sd">            &gt;&gt;&gt; s.flatten().remove_none()</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 5, 6, 7])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, [2, 3, 4], 5, [6, 7]]).matrix(padded=True)</span>
<span class="sd">            &gt;&gt;&gt; s = s.potamia(columns=True)</span>
<span class="sd">            &gt;&gt;&gt; s.flatten().remove_none()</span>
<span class="sd">            Sequence([0, 1, 2, 5, 6, 7, 3, 4])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, [2, 3, 4], 5, [6, 7]]).matrix(padded=True)</span>
<span class="sd">            &gt;&gt;&gt; s = s.potamia(retrograde=True)</span>
<span class="sd">            &gt;&gt;&gt; s.flatten().remove_none()</span>
<span class="sd">            Sequence([0, 1, 4, 3, 2, 5, 7, 6])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([0, 1, [2, 3, 4], 5, [6, 7]]).matrix(padded=True)</span>
<span class="sd">            &gt;&gt;&gt; s = s.potamia(columns=True, retrograde=True)</span>
<span class="sd">            &gt;&gt;&gt; s.flatten().remove_none()</span>
<span class="sd">            Sequence([6, 5, 2, 1, 0, 3, 7, 4])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">array</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">retrograde</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_</span><span class="p">]</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">value</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_</span><span class="p">])</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">value</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_</span><span class="p">])</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_</span><span class="p">]</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.prime_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.prime_sequence">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">prime_sequence</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.prime_sequence(start=11, end=25)</span>
<span class="sd">            Sequence([11, 13, 15, 17, 19, 21, 23, 25])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
                            <span class="n">seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">continue</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.prism_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.prism_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">prism_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([_ for _ in range(8)]).prism_sequence()</span>
<span class="sd">            Sequence([1, 14, 57, 148, 305, 546, 889, 1352])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">n_list</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">seq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.random_walk"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.random_walk">[docs]</a>    <span class="k">def</span> <span class="nf">random_walk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">step_list</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([_ for _ in range(10)]).random_walk(</span>
<span class="sd">            ...     length=5,</span>
<span class="sd">            ...     step_list=[1, 2, 1],</span>
<span class="sd">            ...     random_seed=1,</span>
<span class="sd">            ... )</span>
<span class="sd">            Sequence([0, 9, 0, 2, 1, 0])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">reduce_mod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">rw</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">y</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">rw</span><span class="p">]</span>

        <span class="n">mapped_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">random_seed</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">cyc</span><span class="p">(</span><span class="n">step_list</span><span class="p">)</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">walk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">step_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">next_step</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
                <span class="n">movement</span> <span class="o">=</span> <span class="o">-</span><span class="n">next_step</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="n">next_step</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">movement</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="mi">1</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">walk</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">movement</span>
            <span class="n">walk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">input_list</span> <span class="o">=</span> <span class="n">mapped_list</span>
        <span class="n">list_</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_list</span><span class="p">)</span>
        <span class="n">final_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">input_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">final_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">input_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">reduce_mod</span><span class="p">(</span><span class="n">list_</span><span class="p">,</span> <span class="n">walk</span><span class="p">)])</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">final_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.ratio"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.ratio">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">ratio</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">reciprocals</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence.ratio(&quot;9:8:7:6:5:4&quot;)</span>
<span class="sd">            Sequence([Fraction(1, 1), Fraction(5, 4), Fraction(3, 2), Fraction(7, 4), Fraction(2, 1), Fraction(9, 4)])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="n">Ratio</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">ratio</span><span class="o">.</span><span class="n">extract_sub_ratios</span><span class="p">(</span>
            <span class="n">as_fractions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">reciprocal</span><span class="o">=</span><span class="n">reciprocals</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">([</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.recaman_sequence"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.recaman_sequence">[docs]</a>    <span class="k">def</span> <span class="nf">recaman_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([_ + 1 for _ in range(10)]).recaman_sequence()</span>
<span class="sd">            Sequence([1, 3, 6, 2, 7, 1, 8, 16, 7, 17])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">calc_number</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
            <span class="n">temp_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">temp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">number</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">calc_number</span><span class="p">(</span><span class="n">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">am</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">number</span>
                <span class="n">ap</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
                <span class="k">if</span> <span class="n">am</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">am</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">temp_list</span><span class="p">:</span>
                    <span class="n">temp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">am</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">am</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">temp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ap</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">ap</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">calc_number</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
            <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.reciprocals"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.reciprocals">[docs]</a>    <span class="k">def</span> <span class="nf">reciprocals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0.5]).reciprocals()</span>
<span class="sd">            Sequence([2.0])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">_</span>
            <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.remove_none"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.remove_none">[docs]</a>    <span class="k">def</span> <span class="nf">remove_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, None, 3, None, 4, 5, None, None]).remove_none()</span>
<span class="sd">            Sequence([0, 1, 2, 3, 4, 5])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.reproportion_by_base"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.reproportion_by_base">[docs]</a>    <span class="k">def</span> <span class="nf">reproportion_by_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="nb">round</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; rounder = evans.to_nearest_eighth_tone</span>
<span class="sd">            &gt;&gt;&gt; print(</span>
<span class="sd">            ...     evans.Sequence(</span>
<span class="sd">            ...         [-24, -20, -15, -14, -4, 5, 11, 19, 26, 37, 39, 42]</span>
<span class="sd">            ...         ).reproportion_by_base(</span>
<span class="sd">            ...         base=2,</span>
<span class="sd">            ...         round=rounder,</span>
<span class="sd">            ...     )</span>
<span class="sd">            ... )</span>
<span class="sd">            Sequence([-4.75, -4, -3, -2.75, -0.75, 1, 2.25, 3.75, 5.25, 7.5, 7.75, 8.5])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chord</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">base_converter</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="mf">10.0</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">chord</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">*</span> <span class="n">base_converter</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">round</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">collection</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">collection</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.rotate"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).rotate(2)</span>
<span class="sd">            Sequence([2, 3, 0, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">lst</span><span class="p">[</span><span class="n">n</span><span class="p">:]</span> <span class="o">+</span> <span class="n">lst</span><span class="p">[:</span><span class="n">n</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.roessler"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.roessler">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">roessler</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">t_ini</span><span class="p">,</span> <span class="n">t_fin</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; import numpy</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence.roessler(</span>
<span class="sd">            ...     a=0.13,</span>
<span class="sd">            ...     b=0.2,</span>
<span class="sd">            ...     c=6.5,</span>
<span class="sd">            ...     t_ini=0,</span>
<span class="sd">            ...     t_fin=(3 * (numpy.pi)),</span>
<span class="sd">            ...     h=0.0001,</span>
<span class="sd">            ... )</span>
<span class="sd">            ...</span>
<span class="sd">            Sequence([array([ 0.00000000e+00,  0.00000000e+00, -2.00007553e-09, ...,</span>
<span class="sd">                    1.86024565e-03,  1.86567571e-03,  1.87110585e-03]), array([ 0.        ,  0.        ,  0.        , ..., -0.08504001,</span>
<span class="sd">                   -0.08504093, -0.08504185]), array([0.00000000e+00, 2.00003777e-05, 3.99877548e-05, ...,</span>
<span class="sd">                   3.07404473e-02, 3.07404717e-02, 3.07404962e-02])])</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">calc_coordinates</span><span class="p">(</span><span class="n">x_n</span><span class="p">,</span> <span class="n">y_n</span><span class="p">,</span> <span class="n">z_n</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">a_</span><span class="p">,</span> <span class="n">b_</span><span class="p">,</span> <span class="n">c_</span><span class="p">):</span>
            <span class="n">x_n1</span> <span class="o">=</span> <span class="n">x_n</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">y_n</span> <span class="o">-</span> <span class="n">z_n</span><span class="p">)</span>
            <span class="n">y_n1</span> <span class="o">=</span> <span class="n">y_n</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">x_n</span> <span class="o">+</span> <span class="n">a_</span> <span class="o">*</span> <span class="n">y_n</span><span class="p">)</span>
            <span class="n">z_n1</span> <span class="o">=</span> <span class="n">z_n</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">b_</span> <span class="o">+</span> <span class="n">z_n</span> <span class="o">*</span> <span class="p">(</span><span class="n">x_n</span> <span class="o">-</span> <span class="n">c_</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">x_n1</span><span class="p">,</span> <span class="n">y_n1</span><span class="p">,</span> <span class="n">z_n1</span>

        <span class="n">numsteps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">t_fin</span> <span class="o">-</span> <span class="n">t_ini</span><span class="p">)</span> <span class="o">/</span> <span class="n">h</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">t_ini</span><span class="p">,</span> <span class="n">t_fin</span><span class="p">,</span> <span class="n">numsteps</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">numsteps</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">numsteps</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">numsteps</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">_</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">_</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">z</span><span class="p">[</span><span class="n">_</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">calc_coordinates</span><span class="p">(</span>
                <span class="n">x</span><span class="p">[</span><span class="n">_</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">_</span><span class="p">],</span> <span class="n">z</span><span class="p">[</span><span class="n">_</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">_</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">t</span><span class="p">[</span><span class="n">_</span><span class="p">],</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">class_</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.stack_intervals"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.stack_intervals">[docs]</a>    <span class="k">def</span> <span class="nf">stack_intervals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([1, -2, 3])</span>
<span class="sd">            &gt;&gt;&gt; s.stack_intervals()</span>
<span class="sd">            Sequence([1, -1, 2])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span> <span class="o">+</span> <span class="n">returned_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seq</span></div>

<div class="viewcode-block" id="Sequence.stack_pitches"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.stack_pitches">[docs]</a>    <span class="k">def</span> <span class="nf">stack_pitches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_ratios</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; s = evans.Sequence([1, -2, 3])</span>
<span class="sd">            &gt;&gt;&gt; s.stack_pitches()</span>
<span class="sd">            Sequence([1, 10, 15])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">as_ratios</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="k">while</span> <span class="n">_</span> <span class="o">&lt;</span> <span class="n">returned_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">_</span> <span class="o">*=</span> <span class="mi">2</span>
                <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
            <span class="n">seq</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="k">while</span> <span class="n">_</span> <span class="o">&lt;</span> <span class="n">returned_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">_</span> <span class="o">+=</span> <span class="mi">12</span>
                <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
            <span class="n">seq</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seq</span></div>

<div class="viewcode-block" id="Sequence.subtract_all"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.subtract_all">[docs]</a>    <span class="k">def</span> <span class="nf">subtract_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; l = [1, 2, 3, 4]</span>
<span class="sd">            &gt;&gt;&gt; evans.Sequence(l).subtract_all()</span>
<span class="sd">            Sequence([-8])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">x</span> <span class="o">-=</span> <span class="n">_</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)([</span><span class="n">x</span><span class="p">])</span></div>

<div class="viewcode-block" id="Sequence.transpose"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).transpose(10)</span>
<span class="sd">            Sequence([10, 11, 12, 13])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).transpose(10).mod(12, indices=True)</span>
<span class="sd">            Sequence([10, 11, 0, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">returned_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">_</span> <span class="o">+</span> <span class="n">n</span>
            <span class="n">returned_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">returned_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.warp"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.warp">[docs]</a>    <span class="k">def</span> <span class="nf">warp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">random_seed</span><span class="p">,</span> <span class="n">by_integers</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]).warp(-0.5, 0.5, 3)</span>
<span class="sd">            Sequence([-0.26203537290810863, 1.0442292252959517, 1.8699551665480794, 3.1039200385961943, 4.125720304108054, 4.565528859239813, 5.513167991554874, 7.33746908209646, 7.759354014328007, 8.734330961046696])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]).warp(-1, 1, 3, by_integers=True)</span>
<span class="sd">            Sequence([-1, 2, 3, 2, 4, 6, 6, 8, 9, 8])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warped_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">random_seed</span><span class="p">)</span>
        <span class="n">final_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">by_integers</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">perturbation_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">warped_list</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perturbation_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">warped_list</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">warped_list</span><span class="p">,</span> <span class="n">perturbation_list</span><span class="p">):</span>
            <span class="n">final_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">final_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence.zipped_bifurcation"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.Sequence.zipped_bifurcation">[docs]</a>    <span class="k">def</span> <span class="nf">zipped_bifurcation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">reversed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).zipped_bifurcation()</span>
<span class="sd">            Sequence([0, 3, 1, 2])</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            &gt;&gt;&gt; evans.Sequence([0, 1, 2, 3]).zipped_bifurcation(reversed=False)</span>
<span class="sd">            Sequence([0, 2, 1, 3])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">center</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">first_half</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[:</span><span class="n">center</span><span class="p">]</span>
        <span class="n">second_half</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="p">[</span><span class="n">center</span><span class="p">:])</span>
        <span class="k">if</span> <span class="nb">reversed</span><span class="p">:</span>
            <span class="n">second_half</span> <span class="o">=</span> <span class="n">second_half</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">first_half</span><span class="p">,</span> <span class="n">second_half</span><span class="p">)]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="cyc"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.cyc">[docs]</a><span class="k">def</span> <span class="nf">cyc</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    .. container:: example</span>

<span class="sd">        &gt;&gt;&gt; cyc_list = evans.cyc([0, 1, 2])</span>
<span class="sd">        &gt;&gt;&gt; for _ in range(5):</span>
<span class="sd">        ...     print(next(cyc_list))</span>
<span class="sd">        ...</span>
<span class="sd">        0</span>
<span class="sd">        1</span>
<span class="sd">        2</span>
<span class="sd">        0</span>
<span class="sd">        1</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">yield</span> <span class="n">lst</span><span class="p">[</span><span class="n">count</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)]</span></div>


<div class="viewcode-block" id="flatten"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.flatten">[docs]</a><span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    .. container:: example</span>

<span class="sd">        &gt;&gt;&gt; nested_list = [1, 1, [1, [1, 1]], 1]</span>
<span class="sd">        &gt;&gt;&gt; flat = evans.flatten(nested_list)</span>
<span class="sd">        &gt;&gt;&gt; print(flat)</span>
<span class="sd">        [1, 1, 1, 1, 1, 1]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">out</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span></div>


<div class="viewcode-block" id="julia_set"><a class="viewcode-back" href="../../api/evans/sequence.html#evans.sequence.julia_set">[docs]</a><span class="k">def</span> <span class="nf">julia_set</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">max_iter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    .. container:: example</span>

<span class="sd">        &gt;&gt;&gt; s = evans.julia_set(</span>
<span class="sd">        ...     c=0.25,</span>
<span class="sd">        ...     z0=1.5,</span>
<span class="sd">        ...     max_iter=10,</span>
<span class="sd">        ... )</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; print(s)</span>
<span class="sd">        1.7209086512090908</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">z0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">max_iter</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">+</span> <span class="n">c</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="n">max_iter</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">max_iter</span>

    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">z</span><span class="p">)))</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-2021, Gregory Rowland Evans
      <span class="lastupdated">
        Last updated on Jun 03, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>